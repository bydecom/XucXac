<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quay X√∫c X·∫Øc</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }

        .screen-container {
            display: flex;
            width: 100%;
            height: 100vh;
            justify-content: center;
            align-items: center;
        }

        .screen {
            width: 100%;
            max-width: 800px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        /* ·∫®n m√†n h√¨nh kh√¥ng ho·∫°t ƒë·ªông */
        .screen:not(.active) {
            display: none;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
            text-align: center;
        }

        .screen-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: white;
            transform: scale(1.2);
        }

        .fortune-section {
            margin: 30px 0;
        }

        .fortune-button {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 25px 50px;
            font-size: 1.8em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin: 20px;
        }

        .fortune-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .fortune-result {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .fortune-text {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .fortune-description {
            font-size: 1.1em;
            color: #666;
            text-align: center;
            line-height: 1.6;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .input-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
        }

        .input-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .input-group label {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .input-group input {
            width: 80px;
            height: 60px;
            font-size: 2em;
            text-align: center;
            border: 3px solid #ddd;
            border-radius: 10px;
            outline: none;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .roll-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.5em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .roll-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .roll-button:active {
            transform: translateY(0);
        }

        .dice-container {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            gap: 20px;
        }

        .dice-group {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            min-height: 120px;
        }

        .dice {
            width: 60px;
            height: 60px;
            background: white;
            border: 3px solid #333;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }

        .dice.rolling {
            animation: roll 0.1s ease-in-out infinite;
        }

        @keyframes roll {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .total-section {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .total-group {
            flex: 1;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .total-group h3 {
            color: #666;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .total-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #333;
        }

        .total-group.left .total-value {
            color: #e74c3c;
        }

        .total-group.right .total-value {
            color: #3498db;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .input-section {
                flex-direction: column;
                gap: 15px;
            }
            
            .dice-container {
                flex-direction: column;
                gap: 30px;
            }
            
            .total-section {
                flex-direction: column;
            }

            .screen-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="screen-container" id="screenContainer">
        <!-- M√†n h√¨nh ch√≠nh: Quay X√∫c X·∫Øc -->
        <div class="screen active" id="screen1">
            <div class="container">
                <h1>‚öîÔ∏è Giao Tranh ‚öîÔ∏è</h1>
                
                <div class="input-section">
                    <div class="input-group">
                        <label for="leftDice">S·ªë x√∫c x·∫Øc tr√°i</label>
                        <input type="number" id="leftDice" min="1" max="10" value="3">
                    </div>
                    
                    <button class="roll-button" onclick="rollDice()">QUAY</button>
                    
                    <div class="input-group">
                        <label for="rightDice">S·ªë x√∫c x·∫Øc ph·∫£i</label>
                        <input type="number" id="rightDice" min="1" max="10" value="4">
                    </div>
                </div>

                <div class="dice-container">
                    <div class="dice-group" id="leftDiceGroup">
                        <!-- X√∫c x·∫Øc tr√°i s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü ƒë√¢y -->
                    </div>
                    
                    <div class="dice-group" id="rightDiceGroup">
                        <!-- X√∫c x·∫Øc ph·∫£i s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü ƒë√¢y -->
                    </div>
                </div>

                <div class="total-section">
                    <div class="total-group left">
                        <h3>T·ªïng tr√°i</h3>
                        <div class="total-value" id="leftTotal">0</div>
                    </div>
                    
                    <div class="total-group right">
                        <h3>T·ªïng ph·∫£i</h3>
                        <div class="total-value" id="rightTotal">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- M√†n h√¨nh 2: Ch·ªçn ƒë·∫•t -->
        <div class="screen" id="screen2">
            <div class="container">
                <h1>üèûÔ∏è Ch·ªçn ƒê·∫•t üèûÔ∏è</h1>
                
                <div class="input-section" style="justify-content: center;">
                    <button class="roll-button" onclick="rollLandDice()">QUAY ƒê·∫§T</button>
                </div>

                <div class="dice-container">
                    <div class="dice-group" id="landDiceGroup">
                        <!-- X√∫c x·∫Øc ƒë·∫•t s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü ƒë√¢y -->
                    </div>
                </div>

                <div class="total-section">
                    <div class="total-group" style="flex: 1; max-width: 300px; margin: 0 auto;">
                        <div class="total-value" id="landTotal">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- M√†n h√¨nh 3: K·ª≥ ng·ªô -->
        <div class="screen" id="screen3">
            <div class="container">
                <h1>üîÆ K·ª≥ Ng·ªô üîÆ</h1>
                
                <div class="fortune-section">
                    <button class="fortune-button" onclick="rollFortune()">
                        üé≤ ROLL K·ª≤ NG·ªò üé≤
                    </button>
                    
                    <div class="fortune-result" id="fortuneResult">
                        <div class="fortune-text">Nh·∫•n n√∫t ƒë·ªÉ kh√°m ph√° v·∫≠n m·ªánh c·ªßa b·∫°n!</div>
                        <div class="fortune-description">M·ªói l·∫ßn roll s·∫Ω cho b·∫°n m·ªôt l·ªùi ti√™n tri ng·∫´u nhi√™n</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ch·ªâ b√°o m√†n h√¨nh -->
    <div class="screen-indicator">
        <div class="indicator-dot active" onclick="switchScreen(0)"></div>
        <div class="indicator-dot" onclick="switchScreen(1)"></div>
        <div class="indicator-dot" onclick="switchScreen(2)"></div>
    </div>

    <script>
        function rollDice() {
            const leftCount = parseInt(document.getElementById('leftDice').value);
            const rightCount = parseInt(document.getElementById('rightDice').value);
            
            // X√≥a x√∫c x·∫Øc c≈©
            document.getElementById('leftDiceGroup').innerHTML = '';
            document.getElementById('rightDiceGroup').innerHTML = '';
            
            // T·∫°o x√∫c x·∫Øc m·ªõi
            createDice('leftDiceGroup', leftCount);
            createDice('rightDiceGroup', rightCount);
            
            // B·∫Øt ƒë·∫ßu hi·ªÉn th·ªã s·ªë ng·∫´u nhi√™n
            const allDice = document.querySelectorAll('.dice');
            allDice.forEach(dice => {
                dice.classList.add('rolling');
            });
            
            // Hi·ªÉn th·ªã s·ªë ng·∫´u nhi√™n li√™n t·ª•c
            let rollCount = 0;
            const maxRolls = 20; // S·ªë l·∫ßn thay ƒë·ªïi s·ªë
            const rollInterval = setInterval(() => {
                allDice.forEach(dice => {
                    const randomValue = Math.floor(Math.random() * 6) + 1;
                    dice.textContent = randomValue;
                });
                
                rollCount++;
                if (rollCount >= maxRolls) {
                    clearInterval(rollInterval);
                    allDice.forEach(dice => {
                        dice.classList.remove('rolling');
                    });
                    
                    // T√≠nh t·ªïng v√† hi·ªÉn th·ªã k·∫øt qu·∫£ cu·ªëi c√πng
                    calculateAndShowTotals();
                }
            }, 100); // Thay ƒë·ªïi m·ªói 100ms
        }
        
        function createDice(containerId, count) {
            const container = document.getElementById(containerId);
            
            for (let i = 0; i < count; i++) {
                const dice = document.createElement('div');
                dice.className = 'dice';
                dice.textContent = '?'; // Hi·ªÉn th·ªã d·∫•u ? ban ƒë·∫ßu
                container.appendChild(dice);
            }
        }
        
        function showDiceValue(dice, value) {
            dice.textContent = value; // Hi·ªÉn th·ªã s·ªë tr·ª±c ti·∫øp
        }

        function calculateAndShowTotals() {
            const leftDice = document.querySelectorAll('#leftDiceGroup .dice');
            const rightDice = document.querySelectorAll('#rightDiceGroup .dice');
            
            let leftTotal = 0;
            let rightTotal = 0;
            
            // T√≠nh t·ªïng tr√°i (l·∫•y gi√° tr·ªã cu·ªëi c√πng ƒë√£ hi·ªÉn th·ªã)
            leftDice.forEach(dice => {
                const value = parseInt(dice.textContent);
                leftTotal += value;
            });
            
            // T√≠nh t·ªïng ph·∫£i (l·∫•y gi√° tr·ªã cu·ªëi c√πng ƒë√£ hi·ªÉn th·ªã)
            rightDice.forEach(dice => {
                const value = parseInt(dice.textContent);
                rightTotal += value;
            });
            
            // Hi·ªÉn th·ªã t·ªïng
            document.getElementById('leftTotal').textContent = leftTotal;
            document.getElementById('rightTotal').textContent = rightTotal;
        }

        function rollLandDice() {
            const landCount = 3; // C·ªë ƒë·ªãnh 3 x√∫c x·∫Øc
            
            // X√≥a x√∫c x·∫Øc c≈©
            document.getElementById('landDiceGroup').innerHTML = '';
            
            // T·∫°o x√∫c x·∫Øc m·ªõi
            createDice('landDiceGroup', landCount);
            
            // B·∫Øt ƒë·∫ßu hi·ªÉn th·ªã s·ªë ng·∫´u nhi√™n
            const allDice = document.querySelectorAll('#landDiceGroup .dice');
            allDice.forEach(dice => {
                dice.classList.add('rolling');
            });
            
            // Hi·ªÉn th·ªã s·ªë ng·∫´u nhi√™n li√™n t·ª•c
            let rollCount = 0;
            const maxRolls = 20; // S·ªë l·∫ßn thay ƒë·ªïi s·ªë
            const rollInterval = setInterval(() => {
                allDice.forEach(dice => {
                    const randomValue = Math.floor(Math.random() * 6) + 1;
                    dice.textContent = randomValue;
                });
                
                rollCount++;
                if (rollCount >= maxRolls) {
                    clearInterval(rollInterval);
                    allDice.forEach(dice => {
                        dice.classList.remove('rolling');
                    });
                    
                    // T√≠nh t·ªïng v√† hi·ªÉn th·ªã k·∫øt qu·∫£ cu·ªëi c√πng
                    calculateAndShowLandTotal();
                }
            }, 100); // Thay ƒë·ªïi m·ªói 100ms
        }

        function calculateAndShowLandTotal() {
            const landDice = document.querySelectorAll('#landDiceGroup .dice');
            
            let landTotal = 0;
            
            // T√≠nh t·ªïng ƒë·∫•t (l·∫•y gi√° tr·ªã cu·ªëi c√πng ƒë√£ hi·ªÉn th·ªã)
            landDice.forEach(dice => {
                const value = parseInt(dice.textContent);
                landTotal += value;
            });
            
            // Hi·ªÉn th·ªã t·ªïng
            document.getElementById('landTotal').textContent = landTotal;
        }
        
        // Chuy·ªÉn m√†n h√¨nh
        let currentScreen = 0; // B·∫Øt ƒë·∫ßu ·ªü m√†n h√¨nh giao tranh
        
        function switchScreen(screenIndex) {
            const screens = document.querySelectorAll('.screen');
            const indicators = document.querySelectorAll('.indicator-dot');
            
            currentScreen = screenIndex;
            
            // ·∫®n t·∫•t c·∫£ m√†n h√¨nh
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Hi·ªÉn th·ªã m√†n h√¨nh ƒë∆∞·ª£c ch·ªçn
            screens[screenIndex].classList.add('active');
            
            // C·∫≠p nh·∫≠t ch·ªâ b√°o
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === screenIndex);
            });
        }

        // Roll k·ª≥ ng·ªô
        function rollFortune() {
            const fortunes = [
                // Hi·ªáu ·ª©ng √≠t g·∫∑p (t·ªâ l·ªá th·∫•p)
                {
                    text: "üé≤ Th√™m qu√¢n ng·∫´u nhi√™n!",
                    description: "M·ªôt qu√¢n m·ªõi xu·∫•t hi·ªán ·ªü √¥ ng·∫´u nhi√™n tr√™n b√†n c·ªù!",
                    effect: "add_random_piece"
                },
                {
                    text: "üÉè Th√™m qu√¢n tr√™n tay!",
                    description: "B·∫°n nh·∫≠n ƒë∆∞·ª£c th√™m 1 qu√¢n trong tay ƒë·ªÉ s·ª≠ d·ª•ng!",
                    effect: "add_hand_piece"
                },
                
                // Hi·ªáu ·ª©ng th∆∞·ªùng g·∫∑p (t·ªâ l·ªá cao) - di chuy·ªÉn v√† th√™m qu√¢n
                {
                    text: "‚ö° Di chuy·ªÉn qu√¢n 1 √¥!",
                    description: "B·∫°n c√≥ th·ªÉ di chuy·ªÉn m·ªôt qu√¢n b·∫•t k·ª≥ 1 √¥ theo h∆∞·ªõng mong mu·ªën!",
                    effect: "move_piece_1"
                },
                {
                    text: "üöÄ Di chuy·ªÉn qu√¢n 1 √¥!",
                    description: "NƒÉng l∆∞·ª£ng di chuy·ªÉn! M·ªôt qu√¢n c√≥ th·ªÉ di chuy·ªÉn 1 √¥!",
                    effect: "move_piece_1"
                },
                {
                    text: "üí´ Di chuy·ªÉn qu√¢n 1 √¥!",
                    description: "S·ª©c m·∫°nh k·ª≥ ng·ªô cho ph√©p di chuy·ªÉn qu√¢n 1 √¥!",
                    effect: "move_piece_1"
                },
                {
                    text: "üéØ Th√™m qu√¢n v√†o √¥ n√†y!",
                    description: "M·ªôt qu√¢n m·ªõi ƒë∆∞·ª£c ƒë·∫∑t v√†o √¥ hi·ªán t·∫°i!",
                    effect: "add_piece_current"
                },
                {
                    text: "‚≠ê Th√™m qu√¢n v√†o √¥ n√†y!",
                    description: "NƒÉng l∆∞·ª£ng t·∫≠p trung t·∫°o ra qu√¢n m·ªõi t·∫°i v·ªã tr√≠ n√†y!",
                    effect: "add_piece_current"
                },
                {
                    text: "üî• Th√™m qu√¢n v√†o √¥ n√†y!",
                    description: "S·ª©c m·∫°nh b√πng n·ªï t·∫°o ra qu√¢n m·ªõi ngay t·∫°i ƒë√¢y!",
                    effect: "add_piece_current"
                },
                {
                    text: "‚öîÔ∏è Di chuy·ªÉn qu√¢n 1 √¥!",
                    description: "Chi·∫øn thu·∫≠t cho ph√©p di chuy·ªÉn qu√¢n 1 √¥!",
                    effect: "move_piece_1"
                },
                {
                    text: "üè∞ Th√™m qu√¢n v√†o √¥ n√†y!",
                    description: "X√¢y d·ª±ng th√†nh tr√¨ - th√™m qu√¢n v√†o √¥ hi·ªán t·∫°i!",
                    effect: "add_piece_current"
                }
            ];

            const resultDiv = document.getElementById('fortuneResult');
            const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
            
            // Hi·ªáu ·ª©ng loading
            resultDiv.innerHTML = '<div class="fortune-text">üîÆ ƒêang kh√°m ph√° v·∫≠n m·ªánh...</div>';
            
            setTimeout(() => {
                resultDiv.innerHTML = `
                    <div class="fortune-text">${randomFortune.text}</div>
                    <div class="fortune-description" style="font-size: 1.3em; font-weight: bold; color: #333; line-height: 1.4;">${randomFortune.description}</div>
                `;
            }, 1500);
        }

        // Th√™m s·ª± ki·ªán k√©o m√†n h√¨nh
        let startX = 0;
        let isDragging = false;

        document.getElementById('screenContainer').addEventListener('mousedown', (e) => {
            startX = e.clientX;
            isDragging = true;
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
        });

        document.addEventListener('mouseup', (e) => {
            if (!isDragging) return;
            isDragging = false;
            
            const endX = e.clientX;
            const diffX = startX - endX;
            
            if (Math.abs(diffX) > 50) { // Ng∆∞·ª°ng k√©o t·ªëi thi·ªÉu
                if (diffX > 0 && currentScreen < 2) {
                    switchScreen(currentScreen + 1);
                } else if (diffX < 0 && currentScreen > 0) {
                    switchScreen(currentScreen - 1);
                }
            }
        });

        // Th√™m s·ª± ki·ªán touch cho mobile
        document.getElementById('screenContainer').addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            isDragging = true;
        });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
        });

        document.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            isDragging = false;
            
            const endX = e.changedTouches[0].clientX;
            const diffX = startX - endX;
            
            if (Math.abs(diffX) > 50) {
                if (diffX > 0 && currentScreen < 2) {
                    switchScreen(currentScreen + 1);
                } else if (diffX < 0 && currentScreen > 0) {
                    switchScreen(currentScreen - 1);
                }
            }
        });

        // Kh·ªüi t·∫°o ban ƒë·∫ßu - ch·ªâ t·∫°o x√∫c x·∫Øc m√† kh√¥ng quay
        window.onload = function() {
            const leftCount = parseInt(document.getElementById('leftDice').value);
            const rightCount = parseInt(document.getElementById('rightDice').value);
            const landCount = 3; // C·ªë ƒë·ªãnh 3 x√∫c x·∫Øc cho ph·∫ßn ch·ªçn ƒë·∫•t
            
            // T·∫°o x√∫c x·∫Øc ban ƒë·∫ßu v·ªõi t·∫•t c·∫£ ch·∫•m hi·ªÉn th·ªã (d·∫•u ?)
            createDice('leftDiceGroup', leftCount);
            createDice('rightDiceGroup', rightCount);
            createDice('landDiceGroup', landCount);
            
            // Hi·ªÉn th·ªã t·ªïng = 0
            document.getElementById('leftTotal').textContent = '0';
            document.getElementById('rightTotal').textContent = '0';
            document.getElementById('landTotal').textContent = '0';
        };
    </script>
</body>
</html>
